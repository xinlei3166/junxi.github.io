import{_ as n,c as s,o as a,ag as p}from"./chunks/framework.CgtRPpXH.js";const d=JSON.parse('{"title":"php添加扩展库","description":"","frontmatter":{"title":"php添加扩展库","tags":["Linux","PHP"],"categories":["Linux"]},"headers":[],"relativePath":"blog/Linux/php添加扩展库.md","filePath":"blog/Linux/php添加扩展库.md","lastUpdated":1733335015000}'),i={name:"blog/Linux/php添加扩展库.md"},x=p(`<h2 id="首先进入解压后的php源码包目录" tabindex="-1">首先进入解压后的php源码包目录 <a class="header-anchor" href="#首先进入解压后的php源码包目录" aria-label="Permalink to &quot;首先进入解压后的php源码包目录&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[root@nagios ~]# cd /software/php-7.1.4/</span></span>
<span class="line"><span>[root@nagios php-7.1.4]# ll</span></span>
<span class="line"><span>总用量 6036</span></span>
<span class="line"><span>drwxrwxr-x. 75 junxi junxi    4096 4月  11 23:37 ext</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi   20917 4月  11 23:37 EXTENSIONS</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi     137 4月  11 23:37 footer</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    1776 4月  11 23:37 generated_lists</span></span>
<span class="line"><span>-rwxrwxr-x.  1 junxi junxi     581 4月  11 23:37 genfiles</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    1143 4月  11 23:37 header</span></span>
<span class="line"><span>drwxr-xr-x.  2 root  root        6 4月  19 16:47 include</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi   87836 4月  11 23:37 INSTALL</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi       0 4月  11 23:37 install-sh</span></span>
<span class="line"><span>-rw-r--r--   1 root  root     1306 4月  24 10:34 libphp7.la</span></span>
<span class="line"><span>drwxr-xr-x.  2 root  root       42 4月  24 10:34 libs</span></span>
<span class="line"><span>-rwxr-xr-x   1 root  root   210702 4月  24 10:31 libtool</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    3218 4月  11 23:37 LICENSE</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi  199728 4月  11 23:37 ltmain.sh</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi    4096 4月  24 10:34 main</span></span>
<span class="line"><span>-rwxrwxr-x.  1 junxi junxi    4129 4月  11 23:37 makedist</span></span>
<span class="line"><span>-rw-r--r--.  1 root  root   290359 4月  24 10:31 Makefile</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    5317 4月  11 23:37 makerpm</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi       0 4月  11 23:37 missing</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi       0 4月  11 23:37 mkinstalldirs</span></span>
<span class="line"><span>drwxr-xr-x.  2 root  root       41 4月  24 10:34 modules</span></span>
<span class="line"><span>drwxrwxr-x.  2 junxi junxi      42 4月  11 23:37 netware</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi  130944 4月  11 23:37 NEWS</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi     115 4月  19 16:48 pear</span></span>
<span class="line"><span>-rw-r--r--   1 root  root     1489 4月  24 10:31 php7.spec</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    1489 4月  11 23:37 php7.spec.in</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    2523 4月  11 23:37 php.gif</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi   71063 4月  11 23:37 php.ini-development</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi   71095 4月  11 23:37 php.ini-productionEXTENSIONS</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi   15355 4月  11 23:37 README.STREAMS</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    8126 4月  11 23:37 README.SUBMITTING_PATCH</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    6695 4月  11 23:37 README.TESTING</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    4958 4月  11 23:37 README.TESTING2</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    4261 4月  11 23:37 README.UNIX-BUILD-SYSTEM</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi     109 4月  11 23:37 README.WIN32-BUILD-SYSTEM</span></span>
<span class="line"><span>-rwxrwxr-x.  1 junxi junxi   82234 4月  11 23:37 run-tests.php</span></span>
<span class="line"><span>drwxrwxr-x. 10 junxi junxi     118 4月  11 23:37 sapi</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi     137 4月  24 10:31 scripts</span></span>
<span class="line"><span>-rwxrwxr-x.  1 junxi junxi    2104 4月  11 23:37 server-tests-config.php</span></span>
<span class="line"><span>-rwxrwxr-x.  1 junxi junxi   52726 4月  11 23:37 server-tests.php</span></span>
<span class="line"><span>-rwxrwxr-x.  1 junxi junxi     108 4月  11 23:37 snapshot</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi      10 4月  11 23:37 stamp-h.in</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi       1 4月  11 23:37 stub.c</span></span>
<span class="line"><span>drwxrwxr-x. 10 junxi junxi     142 4月  11 23:37 tests</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi      35 4月  11 23:37 travis</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi    4096 4月  19 16:55 TSRM</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi   23356 4月  11 23:37 UPGRADING</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi    3418 4月  11 23:37 UPGRADING.INTERNALS</span></span>
<span class="line"><span>-rwxrwxr-x.  1 junxi junxi     159 4月  11 23:37 vcsclean</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi    4096 4月  11 23:37 win32</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi   12288 4月  19 16:56 Zend</span></span></code></pre></div><h2 id="进入ext目录" tabindex="-1">进入ext目录 <a class="header-anchor" href="#进入ext目录" aria-label="Permalink to &quot;进入ext目录&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[root@nagios php-7.1.4]# cd ext/</span></span></code></pre></div><h2 id="ext目录下都是php扩展库" tabindex="-1">ext目录下都是php扩展库 <a class="header-anchor" href="#ext目录下都是php扩展库" aria-label="Permalink to &quot;ext目录下都是php扩展库&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[root@nagios ext]# ll</span></span>
<span class="line"><span>总用量 132</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  141 4月  11 23:37 bcmath</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  157 4月  11 23:37 bz2</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  255 4月  11 23:37 calendar</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi 4096 4月  11 23:37 com_dotnet</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  183 4月  19 16:51 ctype</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:51 curl</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi  179 4月  19 16:49 date</span></span>
<span class="line"><span>drwxrwxr-x.  6 junxi junxi 4096 4月  11 23:37 dba</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi 4096 4月  19 16:51 dom</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  138 4月  11 23:37 enchant</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  171 4月  11 23:37 exif</span></span>
<span class="line"><span>-rwxrwxr-x.  1 junxi junxi 8669 4月  11 23:37 ext_skel</span></span>
<span class="line"><span>-rw-rw-r--.  1 junxi junxi 1169 4月  11 23:37 ext_skel_win32.php</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi 4096 4月  19 16:51 fileinfo</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi 4096 4月  19 16:51 filter</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  223 4月  19 16:51 ftp</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi  236 4月  19 16:51 gd</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  107 4月  11 23:37 gettext</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  146 4月  11 23:37 gmp</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:52 hash</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:52 iconv</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  133 4月  11 23:37 imap</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  249 4月  11 23:37 interbase</span></span>
<span class="line"><span>drwxrwxr-x. 21 junxi junxi 4096 4月  11 23:37 intl</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:52 json</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  145 4月  11 23:37 ldap</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  175 4月  19 16:49 libxml</span></span>
<span class="line"><span>drwxrwxr-x.  7 junxi junxi 4096 4月  19 16:53 mbstring</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  167 4月  11 23:37 mcrypt</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:53 mysqli</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi 4096 4月  19 16:55 mysqlnd</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi 4096 4月  11 23:37 oci8</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  172 4月  11 23:37 odbc</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi 4096 4月  19 16:49 opcache</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  238 4月  19 16:49 openssl</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  180 4月  11 23:37 pcntl</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi  215 4月  19 16:50 pcre</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:53 pdo</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  214 4月  11 23:37 pdo_dblib</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  220 4月  11 23:37 pdo_firebird</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  264 4月  11 23:37 pdo_mysql</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  195 4月  11 23:37 pdo_oci</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  215 4月  11 23:37 pdo_odbc</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  205 4月  11 23:37 pdo_pgsql</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:53 pdo_sqlite</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  157 4月  11 23:37 pgsql</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi 4096 4月  24 10:34 phar</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  148 4月  19 16:53 posix</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  119 4月  11 23:37 pspell</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  175 4月  11 23:37 readline</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  105 4月  11 23:37 recode</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  179 4月  19 16:53 reflection</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:53 session</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  156 4月  11 23:37 shmop</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi  277 4月  19 16:53 simplexml</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  134 4月  11 23:37 skeleton</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  101 4月  11 23:37 snmp</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  11 23:37 soap</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi 4096 4月  11 23:37 sockets</span></span>
<span class="line"><span>drwxrwxr-x.  6 junxi junxi 4096 4月  19 16:53 spl</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi  202 4月  19 16:50 sqlite3</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi 8192 4月  24 10:33 standard</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  108 4月  11 23:37 sysvmsg</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  108 4月  11 23:37 sysvsem</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  126 4月  11 23:37 sysvshm</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  170 4月  11 23:37 tidy</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:54 tokenizer</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  142 4月  11 23:37 wddx</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  244 4月  19 16:54 xml</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi  236 4月  19 16:54 xmlreader</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi  150 4月  11 23:37 xmlrpc</span></span>
<span class="line"><span>drwxrwxr-x.  5 junxi junxi  242 4月  19 16:54 xmlwriter</span></span>
<span class="line"><span>drwxrwxr-x.  3 junxi junxi  142 4月  11 23:37 xsl</span></span>
<span class="line"><span>drwxrwxr-x.  6 junxi junxi  273 4月  19 16:54 zip</span></span>
<span class="line"><span>drwxrwxr-x.  4 junxi junxi 4096 4月  19 16:51 zlib</span></span></code></pre></div><h2 id="例如我们需要使用sockets扩展模块" tabindex="-1">例如我们需要使用sockets扩展模块 <a class="header-anchor" href="#例如我们需要使用sockets扩展模块" aria-label="Permalink to &quot;例如我们需要使用sockets扩展模块&quot;">​</a></h2><p>进入sockets扩展库目录下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[root@nagios ext]# cd sockets/</span></span>
<span class="line"><span>[root@nagios sockets]# ll</span></span>
<span class="line"><span>总用量 228</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  1963 4月  11 23:37 config.m4</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi   615 4月  11 23:37 config.w32</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi 43928 4月  11 23:37 conversions.c</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  2571 4月  11 23:37 conversions.h</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi    76 4月  11 23:37 CREDITS</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi 21045 4月  11 23:37 multicast.c</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  3775 4月  11 23:37 multicast.h</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  1826 4月  11 23:37 package.xml</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  3387 4月  11 23:37 php_sockets.h</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi 12746 4月  11 23:37 sendrecvmsg.c</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  1067 4月  11 23:37 sendrecvmsg.h</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  3854 4月  11 23:37 sockaddr_conv.c</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi   904 4月  11 23:37 sockaddr_conv.h</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi 65902 4月  11 23:37 sockets.c</span></span>
<span class="line"><span>drwxrwxr-x. 2 junxi junxi  4096 4月  11 23:37 tests</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi 14696 4月  11 23:37 unix_socket_constants.h</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  5764 4月  11 23:37 win32_socket_constants.h</span></span>
<span class="line"><span>-rw-rw-r--. 1 junxi junxi  4031 4月  11 23:37 windows_common.h</span></span></code></pre></div><h2 id="使用phpize命令来扩展php扩展模块-建立php的外挂模块" tabindex="-1">使用phpize命令来扩展php扩展模块，建立php的外挂模块 <a class="header-anchor" href="#使用phpize命令来扩展php扩展模块-建立php的外挂模块" aria-label="Permalink to &quot;使用phpize命令来扩展php扩展模块，建立php的外挂模块&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[root@nagios sockets]# /usr/local/php/bin/phpize </span></span>
<span class="line"><span>Configuring for:</span></span>
<span class="line"><span>PHP Api Version:         20160303</span></span>
<span class="line"><span>Zend Module Api No:      20160303</span></span>
<span class="line"><span>Zend Extension Api No:   320160303</span></span></code></pre></div><h2 id="编译和安装" tabindex="-1">编译和安装 <a class="header-anchor" href="#编译和安装" aria-label="Permalink to &quot;编译和安装&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[root@nagios sockets]# ./configure --prefix=/usr/local/php/lib --with-php-config=/usr/local/php/bin/php-config --enable-sockets</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[root@nagios sockets]# make &amp;&amp; make install</span></span></code></pre></div><h2 id="查看扩展库模块存放目录下是否有我们新安装的扩展模块" tabindex="-1">查看扩展库模块存放目录下是否有我们新安装的扩展模块 <a class="header-anchor" href="#查看扩展库模块存放目录下是否有我们新安装的扩展模块" aria-label="Permalink to &quot;查看扩展库模块存放目录下是否有我们新安装的扩展模块&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[root@nagios lib]# ll /usr/local/php/lib/php/extensions/no-debug-non-zts-20160303/</span></span>
<span class="line"><span>总用量 5296</span></span>
<span class="line"><span>-rwxr-xr-x 1 root root 3417092 4月  24 10:34 opcache.a</span></span>
<span class="line"><span>-rwxr-xr-x 1 root root 1632504 4月  24 10:34 opcache.so</span></span>
<span class="line"><span>-rwxr-xr-x 1 root root  366176 4月  27 17:18 sockets.so</span></span></code></pre></div><h2 id="接下来我们只要在php-ini文件里添加扩展的模块名即可。" tabindex="-1">接下来我们只要在php.ini文件里添加扩展的模块名即可。 <a class="header-anchor" href="#接下来我们只要在php-ini文件里添加扩展的模块名即可。" aria-label="Permalink to &quot;接下来我们只要在php.ini文件里添加扩展的模块名即可。&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>extension=sockets.so</span></span></code></pre></div><h2 id="然后重启php-fpm服务和web服务。" tabindex="-1">然后重启php-fpm服务和web服务。 <a class="header-anchor" href="#然后重启php-fpm服务和web服务。" aria-label="Permalink to &quot;然后重启php-fpm服务和web服务。&quot;">​</a></h2>`,18),r=[x];function l(e,u,c,t,w,o){return a(),s("div",null,r)}const h=n(i,[["render",l]]);export{d as __pageData,h as default};
